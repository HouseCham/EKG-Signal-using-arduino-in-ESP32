#include <Arduino.h>

/*
Frecuencias 
40Hz = 1725
140Hz = 488 
*/

unsigned int counter = 0;
int delayTime = 488;
int Values[856] = 
{
128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
128,128,128,128,128,128,128,128,128,128,128,128,128,129,129,
129,129,129,129,129,129,130,130,130,130,131,131,131,132,132,
132,132,133,133,133,134,134,134,134,134,135,135,135,135,135,
136,136,136,136,137,137,137,137,137,137,137,137,137,136,136,
136,136,135,135,135,135,134,134,134,134,133,133,132,132,132,
132,131,131,131,130,130,130,130,130,129,129,129,129,129,128,
128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,
128,128,128,128,128,129,129,128,128,128,129,129,129,129,129,
129,129,129,129,129,128,128,128,127,126,126,125,125,125,125,
126,127,129,132,136,140,146,152,159,166,174,182,190,198,206,
213,220,226,231,235,239,241,241,241,239,236,232,226,220,213,
205,196,187,178,168,159,150,141,133,125,119,113,109,105,103,
102,101,102,103,105,107,110,113,116,118,120,122,124,125,126,
126,127,126,126,126,126,125,125,124,124,124,123,123,123,123,
123,123,123,123,123,123,123,123,124,124,124,124,124,124,124,
124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,
124,124,124,124,124,124,124,124,124,125,125,125,124,124,124,
125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,
125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,
125,125,125,126,126,125,125,125,126,126,126,126,125,126,126,
126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,
126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,
126,126,126,126,126,126,126,126,126,127,127,127,127,127,127,
127,128,128,128,128,129,129,129,129,130,130,130,130,131,131,
131,132,132,132,132,132,133,133,133,134,134,134,134,135,135,
135,135,135,136,136,136,136,137,137,137,137,137,138,138,138,
138,138,139,139,140,140,140,140,140,141,141,141,141,141,142,
142,142,142,142,143,143,143,143,143,143,144,144,144,144,145,
145,145,145,145,146,146,146,146,147,147,147,147,147,148,148,
148,148,148,148,149,149,148,149,149,149,149,149,148,148,148,
148,148,147,147,147,147,146,146,146,145,145,145,144,144,144,
143,143,143,142,142,142,142,142,141,141,141,140,140,140,140,
139,139,139,139,138,138,138,137,137,137,137,136,136,136,136,
135,135,135,134,134,134,134,134,133,133,133,133,132,132,132,
132,131,131,131,130,130,130,130,130,129,129,129,129,128,128,
128,127,127,127,127,127,126,126,126,126,126,125,125,125,125,
124,124,124,124,124,123,123,123,123,123,123,123,123,123,123,
123,123,123,123,123,123,123,123,123,123,123,123,123,123,123,
123,123,124,124,123,123,124,124,124,124,124,124,124,124,124,
124,124,124,124,124,124,124,124,124,124,124,124,124,124,124,
124,124,124,124,124,124,124,124,124,124,124,124,125,124,124,
124,125,125,125,125,125,125,125,125,125,125,125,125,125,125,
125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,
125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,
126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,
126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,
126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,
126,126,126,126,126,126,126,126,126,126,126,126,126,126,126,
127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,
127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,
127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,
127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,
127,127,127,127,127,127,127,127,128,128,127,127,127,128,128,
128,128,127,127,128,128,128,128,128,128,128,128,128,128,128,
128,
};

const int chargeButton1 = 11;
const int chargeButton2 = 14;
const int dischargeButton1 = 13;
const int dischargeButton2 = 14;

void setup(){
    Serial.begin(115200);

    pinMode(chargeButton1, INPUT_PULLDOWN);
    pinMode(chargeButton2, INPUT);
    pinMode(dischargeButton1, INPUT_PULLDOWN);
    pinMode(dischargeButton2, INPUT);

    attachInterrupt(chargeButton1, carga, RISING);  //LOW, HIGH, FALLING, RISING, CHANGE
    attachInterrupt(dischargeButton1, carga, RISING);
}

void loop()
{
    for(int i=0;i<856;i++)
    {
        dacWrite(DAC1, Values[i]);
        Serial.println(Values[i]);
        delayMicroseconds(delayTime); 
    }
    counter++;
}

void carga(){
    if (chargeButton2 == HIGH)
    {
        
    }
}

void descarga(){
    if (dischargeButton2 == HIGH)
    {
        
    }
}